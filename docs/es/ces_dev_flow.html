<html><head>
<title>Flujo de desarrollo</title>
<meta charset="utf-8"> 
</head>
<body>
<h1>Flujo de desarrollo</h1>
<p>A continuación se explica la forma de trabajar habitual del equipo de
desarrollo de IntegralCES y los recursos que el equipo utiliza.<p>
<h3><a name="comunication">Comunicación</a></h3>
<p>Disponemos y utilizamos los siguientes canales de comunicación:
<ul>
<li><strong>Canal <code>#integralces</code></strong> en Freenode, servidor de IRC. Éste es el 
canal más immediato y más informal, entra y prueba suerte.</li>
<li><strong>Lista de correo <code>integralces@llistes.cooperativa.cat</code></strong>. Lista de
distribución dónde se comenta y coordina el desarrollo del proyecto, 
principalmente a nivel de desarrollo pero también a nivel de comunicación, etc.
La lista es pública y te puedes inscribir en 
http://llistes.cooperativa.cat:8081/mailman/subscribe/integralces. El idioma
habitual de la lista es catalan y español, aunque si escribes en inglés también
responderemos.</li>
<li><strong><em>Issue queue</em> de drupal.org</strong>. Utilizamos la lista de <em>issues</em> de
drupal.org para mantener organizadas las tareas pendientes, quien es
responsable de efectuarlas, etc. Este contenido es en inglés. Hay listas
separada para los módulos (https://drupal.org/project/issues/1367140) y para el tema 
(https://drupal.org/project/issues/1866046). Cualquier desarrollo mínimamente
relevante tiene que tener su <em>issue</em> associada.</li>
</ul>
</p>
<h3><a name="workflow">Flujo de desarrollo</a></h3>
<p>Por flujo de desarrollo entendemos los pasos que seguimos desde que decidimos
cambiar el código del proyeto para realizar alguna mejora hasta que este código
está publicdo y integrado en el proyecto. El flujo está basado en la 
recomendación de drupal.org que se encuentra en  https://drupal.org/node/711070.</p>
<p>Tenemos las siguientes consideraciones:
<ul><li>
La única rama general y común con la que trabajaremos será la rama con nombre 
<strong>7.x-1.x</strong>. Esta es la rama que podemos llamar de desarrollo. La 
rama master está vacía. No hay rama estable (serán tags a esta rama).</li>
  <li>
Cuando queremos tocar código, hacemos una rama nueva para aquella <em>issue</em>
siguiendo el convenio de que el nombre de la rama es 
<code>[issue-number]-[short description]</code>. Por ejemplo:
<pre><code>$git branch 1916476-migration
$git checkout 1916476-migration  
</code></pre>
  </li>
  <li>
Hasta que aquella issue no esté completamente acabada y revisada o lo que se
necesite para darla por buena no haremos el <em>merge</em> a la rama principal 
<strong>7.x-1.x</strong>. En particular, pueden haber funcionalidades 
importantes que estén mucho tiempo separadas de la rama principal. En el caso de
arreglar bugs o hacer pequeñas cosas, hacemos directamente el merge a la rama
principal. Nos tenemos que asegurar que la rama principal siempre pasa los test
automáticos. Esto no significa que tengamos que trabajar en local: podemos subir
las ramas que sean necesarias al repositorio de drupal.org.
  </li>
  <li>
Cuando queramos lanzar una versión estable, haremos un tag en la rama 7.x-1.x.
Así pues, no es necesario mantener dos líneas, la estable y la de desarrollo.
  </li>
</ul>
</p>
<h3><a name="workflow_example">Ejemplo de flujo de desarrollo</a></h3>
<p>Recogemos una incidencia (issue) del proyecto o lo creamos si es necesario.
https://drupal.org/project/issues/1367140
</p>
<p>
Creamos una rama con la referencia de la incidencia:
<pre><code>$git branch 2207369-Notice_messages
$git checkout 2207369-Notice_messages
</code></pre>
</p>
<p>
Hacemos el desarrollo, corregimos el bug, etc.
</p>
<p>Pasamos los test. Desde la web:<br/>
<code>/#.overlay=admin/config/development/testing</code><br/>
o desde drush:<br/>
<pre><code>$drush test-run --xml CES
</code></pre>
Generando archivo xml con los detalles del test en testsuite...xml
</p>
<p>Si todo va bien fusionamos rama con principal:<br/>
<pre><code>
$git fetch origin                    # Actualizamos local con remoto
$git rebase origin/7.x-1.x           # Combinar cambios de 7.x-1.x a la rama actual
$git checkout 7.x-1.x                # Nos colocamos en la rama principal
$git pull                            # Combinar local con remoto
$git rebase 2207369-Notice_messagesi # Combinar rama con los cambios a 7.x-1.x
</code></pre>
</p>
<p>Subimos cambios al servidor:<br/>
<pre><code>$git push
</code></pre>
</p>
<p>Cerramos incidencia (issue) en drupal.org</p>
</body>
</html>
